# Gemini API Key (from https://aistudio.google.com/apikey)
GEMINI_API_KEY=your_gemini_api_key

# API Key for X-LEXICON-API-KEY header authentication (required)
# All endpoints except /health require this header
LEXICON_API_KEY=your_api_key

# =============================================================================
# Database Configuration (follows Google Cloud SQL naming convention)
# =============================================================================
# For TCP connection (local development or Cloud SQL Proxy)
DB_HOST=127.0.0.1
DB_PORT=5432
DB_USER=postgres
DB_PASS=your_password
DB_NAME=postgres
DB_SCHEMA=bo_crawler_v1

# For Cloud SQL Unix socket connection (Cloud Run/App Engine)
# Uncomment and set this instead of DB_HOST when deploying to Cloud Run
# Format: /cloudsql/PROJECT_ID:REGION:INSTANCE_NAME
# INSTANCE_UNIX_SOCKET=/cloudsql/my-project:us-central1:my-instance

# Extraction mode: "text" (PDF to text first) or "pdf" (send PDF directly to LLM)
EXTRACTION_MODE=text
EXTRACTION_CHUNK_SIZE=100
EXTRACTION_MODEL=gemini/gemini-2.5-flash-lite
EXTRACTION_FALLBACK_MODEL=gemini/gemini-2.5-flash
EXTRACTION_FALLBACK_MODEL_2=gemini/gemini-2.5-pro

# =============================================================================
# Embedding Configuration (for AI Agent council semantic search)
# =============================================================================
# Uses Gemini embedding model for vector embeddings
EMBEDDING_MODEL=gemini/gemini-embedding-001
EMBEDDING_DIMENSIONS=768
EMBEDDING_TASK_TYPE=RETRIEVAL_DOCUMENT
EMBEDDING_ENABLED=true


# Queue backend selection: "nats" or "pubsub"
QUEUE_BACKEND=nats

# NATS configuration (used when QUEUE_BACKEND=nats)
NATS__URL=nats://localhost:4222
NATS__NUM_OF_SUMMARIZER_CONSUMER_INSTANCES=3
# Ack wait time in seconds - how long before unacknowledged messages are redelivered
# Set high (3600 = 1 hour) for long-running extraction tasks
NATS__ACK_WAIT_SECONDS=3600

# Google Pub/Sub configuration (used when QUEUE_BACKEND=pubsub)
# PUBSUB__PROJECT_ID will fallback to GCP_PROJECT_ID if not set
PUBSUB__PROJECT_ID=
PUBSUB__TOPIC_NAME=supreme-court-extraction
PUBSUB__SUBSCRIPTION_NAME=supreme-court-extraction-sub
PUBSUB__DLQ_TOPIC_NAME=supreme-court-extraction-dlq
PUBSUB__DLQ_SUBSCRIPTION_NAME=supreme-court-extraction-dlq-sub
PUBSUB__NUM_OF_CONSUMER_INSTANCES=3

# Pub/Sub embedding queue configuration (for backfill jobs)
PUBSUB__EMBEDDING_TOPIC_NAME=supreme-court-extraction-embedding
PUBSUB__EMBEDDING_SUBSCRIPTION_NAME=supreme-court-extraction-embedding-sub

# Service settings
PORT=8004

# Optional: Google Cloud Platform settings
# Base64-encoded service account JSON (for GCS and Pub/Sub access)
# Generate with: cat service-account.json | base64 -w 0
GCP_PROJECT_ID=
GCP_CREDENTIALS_BASE64=
